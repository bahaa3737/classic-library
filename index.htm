<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ±Ø§Ø« - Classic Library</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Times New Roman', 'Traditional Arabic', serif;
        }
        
        :root {
            --parchment: #f5e8c8;
            --ink: #2c1810;
            --gold: #8B6914;
            --shadow: rgba(44, 24, 16, 0.3);
        }
        
        body {
            background: var(--parchment);
            min-height: 100vh;
            padding: 0;
            color: var(--ink);
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%238b6914' fill-opacity='0.03' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
        .main-header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 3px double var(--ink);
            margin-bottom: 40px;
            position: relative;
        }
        
        .main-header::before, .main-header::after {
            content: "â¦";
            position: absolute;
            bottom: -12px;
            color: var(--gold);
            font-size: 1.5em;
        }
        
        .main-header::before { left: 20%; }
        .main-header::after { right: 20%; }
        
        .main-header h1 {
            font-size: 3.5em;
            color: var(--ink);
            margin-bottom: 10px;
            font-weight: normal;
            letter-spacing: 3px;
        }
        
        .main-header .subtitle {
            font-size: 1.3em;
            color: var(--gold);
            font-style: italic;
        }
        
        .admin-access {
            position: absolute;
            top: 20px;
            left: 20px;
        }
        
        .admin-btn {
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            padding: 8px 16px;
            font-size: 0.9em;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .admin-btn:hover {
            background: var(--parchment);
            color: var(--ink);
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */
        .search-section {
            background: rgba(44, 24, 16, 0.05);
            padding: 25px;
            border: 1px solid var(--gold);
            margin-bottom: 30px;
            border-radius: 2px;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--gold);
            background: var(--parchment);
            font-size: 1.1em;
            color: var(--ink);
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--ink);
        }
        
        .search-btn {
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            padding: 0 25px;
            cursor: pointer;
            font-size: 1.1em;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .filter-select {
            padding: 8px 15px;
            border: 1px solid var(--gold);
            background: var(--parchment);
            color: var(--ink);
            font-size: 1em;
        }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„ÙƒØªØ¨ */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        .book-card {
            background: var(--parchment);
            border: 1px solid var(--gold);
            padding: 20px;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 3px 3px 8px var(--shadow);
        }
        
        .book-card::before {
            content: "";
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border: 1px solid rgba(139, 105, 20, 0.3);
            pointer-events: none;
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 5px 5px 15px var(--shadow);
        }
        
        .book-cover {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--parchment), var(--gold));
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--gold);
        }
        
        .book-cover img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }
        
        .book-cover .cover-placeholder {
            color: var(--ink);
            font-size: 3em;
            opacity: 0.3;
        }
        
        .upload-btn {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: rgba(44, 24, 16, 0.8);
            color: var(--parchment);
            border: none;
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
        }
        
        .book-title {
            font-size: 1.3em;
            color: var(--ink);
            margin-bottom: 8px;
            font-weight: bold;
            line-height: 1.3;
        }
        
        .book-author {
            color: var(--gold);
            margin-bottom: 8px;
            font-style: italic;
        }
        
        .book-category {
            display: inline-block;
            background: var(--ink);
            color: var(--parchment);
            padding: 3px 8px;
            font-size: 0.8em;
            margin-bottom: 10px;
        }
        
        .book-price {
            font-size: 1.4em;
            color: var(--ink);
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .book-stock {
            color: var(--gold);
            margin-bottom: 15px;
            font-size: 0.9em;
        }
        
        .stock-out {
            color: #8B0000;
            font-weight: bold;
        }
        
        .order-btn {
            width: 100%;
            padding: 10px;
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .order-btn:hover:not(:disabled) {
            background: var(--parchment);
            color: var(--ink);
        }
        
        .order-btn:disabled {
            background: #ccc;
            border-color: #999;
            color: #666;
            cursor: not-allowed;
        }
        
        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ */
        .order-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 24, 16, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .order-form {
            background: var(--parchment);
            padding: 30px;
            border: 2px solid var(--ink);
            width: 90%;
            max-width: 500px;
            position: relative;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--ink);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--ink);
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gold);
            background: var(--parchment);
            color: var(--ink);
            font-size: 1em;
        }
        
        .submit-order {
            width: 100%;
            padding: 12px;
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            cursor: pointer;
            font-size: 1.1em;
        }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© */
        .admin-panel {
            display: none;
            background: var(--parchment);
            padding: 30px;
            border: 2px solid var(--ink);
            margin-top: 30px;
        }
        
        .admin-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--gold);
        }
        
        .admin-section h3 {
            color: var(--ink);
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 1px solid var(--gold);
            padding-bottom: 5px;
        }
        
        .category-management {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .category-management input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--gold);
            background: var(--parchment);
        }
        
        .add-category-btn {
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            padding: 8px 15px;
            cursor: pointer;
        }
        
        .categories-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .category-tag {
            background: var(--ink);
            color: var(--parchment);
            padding: 5px 10px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .remove-category {
            background: none;
            border: none;
            color: var(--parchment);
            cursor: pointer;
        }
        
        .book-form .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .book-form .full-width {
            grid-column: 1 / -1;
        }
        
        .add-book-btn {
            background: var(--ink);
            color: var(--parchment);
            border: 1px solid var(--ink);
            padding: 12px 30px;
            cursor: pointer;
            font-size: 1.1em;
            width: 100%;
        }
        
        .books-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--gold);
            padding: 15px;
        }
        
        .book-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid rgba(139, 105, 20, 0.3);
        }
        
        .book-item:last-child {
            border-bottom: none;
        }
        
        .delete-book {
            background: #8B0000;
            color: var(--parchment);
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.8em;
        }
        
        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        .footer {
            text-align: center;
            padding: 30px 20px;
            border-top: 3px double var(--ink);
            margin-top: 50px;
            color: var(--gold);
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .main-header h1 {
                font-size: 2.5em;
            }
            
            .admin-access {
                position: static;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .book-form .form-row {
                grid-template-columns: 1fr;
            }
            
            .filters {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
        <div id="mainPage">
            <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
            <header class="main-header">
                <div class="admin-access">
                    <button class="admin-btn" onclick="showAdminPanel()">
                        <i class="fas fa-key"></i> Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                    </button>
                </div>
                <h1>Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ±Ø§Ø«</h1>
                <div class="subtitle">Classic Library - Ù…Ù†Ø° Ù¡Ù©Ù¥Ù </div>
            </header>

            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
            <section class="search-section">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø£Ùˆ Ù…Ø¤Ù„Ù...">
                    <button class="search-btn" onclick="searchBooks()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="filters">
                    <select class="filter-select" id="categoryFilter" onchange="filterBooks()">
                        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
                    </select>
                    <select class="filter-select" id="sortSelect" onchange="sortBooks()">
                        <option value="title">ØªØ±ØªÙŠØ¨ Ø£Ø¨Ø¬Ø¯ÙŠ</option>
                        <option value="price-asc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø£Ø¹Ù„Ù‰</option>
                        <option value="price-desc">Ø§Ù„Ø³Ø¹Ø±: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„</option>
                        <option value="author">Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¤Ù„Ù</option>
                    </select>
                </div>
            </section>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨ -->
            <div class="books-grid" id="booksGrid">
                <!-- Ø§Ù„ÙƒØªØ¨ ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>

            <!-- Ø§Ù„ØªØ°ÙŠÙŠÙ„ -->
            <footer class="footer">
                "Ø®ÙŠØ± Ø¬Ù„ÙŠØ³ ÙÙŠ Ø§Ù„Ø²Ù…Ø§Ù† ÙƒØªØ§Ø¨" - Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ±Ø§Ø« Â© 2024
            </footer>
        </div>

        <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
        <div id="adminPanel" class="admin-panel">
            <button class="admin-btn" onclick="showMainPage()" style="margin-bottom: 20px;">
                <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ØªØ¬Ø±
            </button>

            <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª -->
            <div class="admin-section">
                <h3><i class="fas fa-tags"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h3>
                <div class="category-management">
                    <input type="text" id="newCategoryInput" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                    <button class="add-category-btn" onclick="addCategory()">Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ</button>
                </div>
                <div class="categories-list" id="categoriesList">
                    <!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª ØªÙØ¹Ø±Ø¶ Ù‡Ù†Ø§ -->
                </div>
            </div>

            <!-- Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯ -->
            <div class="admin-section">
                <h3><i class="fas fa-book-medical"></i> Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
                <form class="book-form" id="bookForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø§Ø³Ù… Ø§Ù„ÙƒØªØ§Ø¨</label>
                            <input type="text" id="bookTitle" required>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ù…Ø¤Ù„Ù</label>
                            <input type="text" id="bookAuthor" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø§Ù„ØªØµÙ†ÙŠÙ</label>
                            <select id="bookCategory" required>
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡)</label>
                            <input type="number" id="bookPrice" min="1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©</label>
                            <input type="number" id="bookQuantity" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>Ø±ÙØ¹ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                            <input type="file" id="bookImage" accept="image/*" onchange="previewImage(this)">
                        </div>
                    </div>
                    <button type="submit" class="add-book-btn">
                        <i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨
                    </button>
                </form>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
            <div class="admin-section">
                <h3><i class="fas fa-books"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒØªØ¨</h3>
                <div class="books-list" id="adminBooksList">
                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨ -->
    <div class="order-modal" id="orderModal">
        <div class="order-form">
            <button class="close-btn" onclick="closeOrderModal()">Ã—</button>
            <h3 style="text-align: center; margin-bottom: 20px; color: var(--ink);">
                Ø·Ù„Ø¨ ÙƒØªØ§Ø¨: <span id="selectedBookTitle"></span>
            </h3>
            <div class="form-group">
                <label>Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…</label>
                <input type="text" id="customerName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
            </div>
            <div class="form-group">
                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                <input type="tel" id="customerPhone" placeholder="01033877216">
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                <input type="text" id="customerAddress" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙˆØµÙŠÙ„">
            </div>
            <button class="submit-order" onclick="submitOrder()">
                <i class="fab fa-whatsapp"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
            </button>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let books = JSON.parse(localStorage.getItem('classicBooks')) || [];
        let categories = JSON.parse(localStorage.getItem('classicCategories')) || [
            "Ø£Ø¯Ø¨ Ø¹Ø±Ø¨ÙŠ", "Ø£Ø¯Ø¨ Ø¹Ø§Ù„Ù…ÙŠ", "ØªØ§Ø±ÙŠØ®", "ÙÙ„Ø³ÙØ©", "Ø¹Ù„ÙˆÙ…", 
            "Ø´Ø¹Ø±", "Ø±ÙˆØ§Ø¦Ø¹", "Ù…Ø®Ø·ÙˆØ·Ø§Øª", "ØªØ±Ø§Ø«"
        ];
        let currentBook = null;

        // Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function saveData() {
            localStorage.setItem('classicBooks', JSON.stringify(books));
            localStorage.setItem('classicCategories', JSON.stringify(categories));
        }

        // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
        function updateCategoryUI() {
            const categoryFilter = document.getElementById('categoryFilter');
            const bookCategory = document.getElementById('bookCategory');
            const categoriesList = document.getElementById('categoriesList');

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
            categoryFilter.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>';
            bookCategory.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ</option>';
            
            categories.forEach(category => {
                categoryFilter.innerHTML += `<option value="${category}">${category}</option>`;
                bookCategory.innerHTML += `<option value="${category}">${category}</option>`;
            });

            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
            categoriesList.innerHTML = '';
            categories.forEach((category, index) => {
                categoriesList.innerHTML += `
                    <div class="category-tag">
                        ${category}
                        <button class="remove-category" onclick="removeCategory(${index})">Ã—</button>
                    </div>
                `;
            });
        }

        // Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ Ø¬Ø¯ÙŠØ¯
        function addCategory() {
            const input = document.getElementById('newCategoryInput');
            const newCategory = input.value.trim();
            
            if (newCategory && !categories.includes(newCategory)) {
                categories.push(newCategory);
                saveData();
                updateCategoryUI();
                input.value = '';
            }
        }

        // Ø¥Ø²Ø§Ù„Ø© ØªØµÙ†ÙŠÙ
        function removeCategory(index) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØµÙ†ÙŠÙØŸ')) {
                categories.splice(index, 1);
                saveData();
                updateCategoryUI();
            }
        }

        // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©
        function previewImage(input) {
            // Ø³ÙŠØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨
        }

        // Ø¥Ø¶Ø§ÙØ© ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯
        document.getElementById('bookForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('bookTitle').value;
            const author = document.getElementById('bookAuthor').value;
            const category = document.getElementById('bookCategory').value;
            const price = parseInt(document.getElementById('bookPrice').value);
            const quantity = parseInt(document.getElementById('bookQuantity').value);
            const imageInput = document.getElementById('bookImage');
            
            let imageData = '';
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©
            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    imageData = e.target.result;
                    addBookToSystem(title, author, category, price, quantity, imageData);
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                addBookToSystem(title, author, category, price, quantity, '');
            }
        });

        function addBookToSystem(title, author, category, price, quantity, imageData) {
            const newBook = {
                id: Date.now(),
                title: title,
                author: author,
                category: category,
                price: price,
                quantity: quantity,
                image: imageData,
                dateAdded: new Date().toLocaleDateString('ar-EG')
            };
            
            books.push(newBook);
            saveData();
            displayBooks();
            displayAdminBooks();
            document.getElementById('bookForm').reset();
            alert('âœ“ ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ù†Ø¬Ø§Ø­');
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ø§Ù„Ù…ØªØ¬Ø±
        function displayBooks() {
            const booksGrid = document.getElementById('booksGrid');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedCategory = document.getElementById('categoryFilter').value;
            const sortBy = document.getElementById('sortSelect').value;

            let filteredBooks = books.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm) || 
                                   book.author.toLowerCase().includes(searchTerm);
                const matchesCategory = !selectedCategory || book.category === selectedCategory;
                return matchesSearch && matchesCategory;
            });

            // Ø§Ù„ØªØ±ØªÙŠØ¨
            filteredBooks.sort((a, b) => {
                switch(sortBy) {
                    case 'price-asc': return a.price - b.price;
                    case 'price-desc': return b.price - a.price;
                    case 'author': return a.author.localeCompare(b.author);
                    default: return a.title.localeCompare(b.title);
                }
            });

            booksGrid.innerHTML = '';

            if (filteredBooks.length === 0) {
                booksGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gold);">
                        <i class="fas fa-book-open" style="font-size: 3em; margin-bottom: 15px;"></i>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØªØ¨ ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«</h3>
                    </div>
                `;
                return;
            }

            filteredBooks.forEach(book => {
                const isOutOfStock = book.quantity === 0;
                const stockClass = isOutOfStock ? 'stock-out' : '';
                
                const bookCard = `
                    <div class="book-card">
                        <div class="book-cover">
                            ${book.image ? 
                                `<img src="${book.image}" alt="${book.title}">` : 
                                `<div class="cover-placeholder">ğŸ“–</div>`
                            }
                        </div>
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">${book.author}</p>
                        <span class="book-category">${book.category}</span>
                        <p class="book-price">${book.price} Ø¬Ù†ÙŠÙ‡</p>
                        <p class="book-stock ${stockClass}">
                            ${isOutOfStock ? 'ØºÙŠØ± Ù…ØªØ§Ø­' : `Ø§Ù„Ù…ØªØ§Ø­: ${book.quantity} Ù†Ø³Ø®Ø©`}
                        </p>
                        <button class="order-btn" onclick="openOrderModal(${book.id})" ${isOutOfStock ? 'disabled' : ''}>
                            ${isOutOfStock ? 'ØºÙŠØ± Ù…ØªØ§Ø­' : 'Ø·Ù„Ø¨ Ø§Ù„ÙƒØªØ§Ø¨'}
                        </button>
                    </div>
                `;
                booksGrid.innerHTML += bookCard;
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
        function displayAdminBooks() {
            const booksList = document.getElementById('adminBooksList');
            booksList.innerHTML = '';

            books.forEach(book => {
                const bookItem = `
                    <div class="book-item">
                        <div>
                            <strong>${book.title}</strong> - ${book.author}
                            <br><small>${book.category} | ${book.price} Ø¬Ù†ÙŠÙ‡ | ${book.quantity} Ù†Ø³Ø®Ø©</small>
                        </div>
                        <button class="delete-book" onclick="deleteBook(${book.id})">
                            <i class="fas fa-trash"></i> Ø­Ø°Ù
                        </button>
                    </div>
                `;
                booksList.innerHTML += bookItem;
            });
        }

        // Ø­Ø°Ù ÙƒØªØ§Ø¨
        function deleteBook(bookId) {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨ØŸ')) {
                books = books.filter(book => book.id !== bookId);
                saveData();
                displayBooks();
                displayAdminBooks();
            }
        }

        // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨
        function openOrderModal(bookId) {
            currentBook = books.find(book => book.id === bookId);
            document.getElementById('selectedBookTitle').textContent = currentBook.title;
            document.getElementById('orderModal').style.display = 'flex';
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ù„Ø¨
        function closeOrderModal() {
            document.getElementById('orderModal').style.display = 'none';
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨
        function submitOrder() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const address = document.getElementById('customerAddress').value;

            if (!name || !phone) {
                alert('âš ï¸ ÙŠØ±Ø¬Ù‰å¡«å†™ Ø§Ù„Ø§Ø³Ù… ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');
                return;
            }

            const message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ ğŸŒ¹

Ø·Ù„Ø¨ ÙƒØªØ§Ø¨ Ø¬Ø¯ÙŠØ¯:
ğŸ“– Ø§Ù„ÙƒØªØ§Ø¨: ${currentBook.title}
âœï¸ Ø§Ù„Ù…Ø¤Ù„Ù: ${currentBook.author}
ğŸ·ï¸ Ø§Ù„ØªØµÙ†ÙŠÙ: ${currentBook.category}
ğŸ’ Ø§Ù„Ø³Ø¹Ø±: ${currentBook.price} Ø¬Ù†ÙŠÙ‡
ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}
ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}
${address ? `ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}` : ''}

Ù†Ø±Ø¬Ùˆ Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù„ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆØ¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ….`;

            const whatsappUrl = `https://wa.me/201033877216?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');

            // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©
            currentBook.quantity--;
            saveData();
            displayBooks();
            displayAdminBooks();

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†
            closeOrderModal();
            document.getElementById('customerName').value = '';
            document.getElementById('customerPhone').value = '';
            document.getElementById('customerAddress').value = '';

            alert('Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ğŸ“š');
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙÙŠØ©
        function searchBooks() {
            displayBooks();
        }

        function filterBooks() {
            displayBooks();
        }

        function sortBooks() {
            displayBooks();
        }

        // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
        function showAdminPanel() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            displayAdminBooks();
            updateCategoryUI();
        }

        function showMainPage() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('mainPage').style.display = 'block';
            displayBooks();
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©
        document.getElementById('searchInput').addEventListener('input', displayBooks);

        // Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        function initialize() {
            // Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©
            if (books.length === 0) {
                books = [
                    {
                        id: 1,
                        title: "Ø¯ÙŠÙˆØ§Ù† Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ",
                        author: "Ø£Ø¨Ùˆ Ø§Ù„Ø·ÙŠØ¨ Ø§Ù„Ù…ØªÙ†Ø¨ÙŠ",
                        category: "Ø´Ø¹Ø±",
                        price: 75,
                        quantity: 5,
                        image: "",
                        dateAdded: "2024-01-01"
                    },
                    {
                        id: 2,
                        title: "ÙƒÙ„ÙŠÙ„Ø© ÙˆØ¯Ù…Ù†Ø©",
                        author: "Ø§Ø¨Ù† Ø§Ù„Ù…Ù‚ÙØ¹",
                        category: "Ø£Ø¯Ø¨ Ø¹Ø±Ø¨ÙŠ",
                        price: 60,
                        quantity: 8,
                        image: "",
                        dateAdded: "2024-01-01"
                    },
                    {
                        id: 3,
                        title: "Ø§Ù„Ø£ÙŠØ§Ù…",
                        author: "Ø·Ù‡ Ø­Ø³ÙŠÙ†",
                        category: "Ø£Ø¯Ø¨ Ø¹Ø±Ø¨ÙŠ",
                        price: 45,
                        quantity: 0,
                        image: "",
                        dateAdded: "2024-01-01"
                    }
                ];
                saveData();
            }
            
            displayBooks();
            updateCategoryUI();
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        initialize();
    </script>
</body>
</html>